# Kali NetHunter Installer

This [Kali NetHunter](https://www.kali.org/get-kali/#kali-mobile) installer is basically just a zip file generated by `build.py` from the folder layout contained here.

Follow the instructions below to create the Kali NetHunter installer zip.

All you have to do is flash it through **TWRP** (or **Magisk**) for a complete Kali NetHunter environment and chroot<!--/rootfs --> on your device.

The default boot image patching script is based on [LazyFlasher](https://github.com/jcadduono/lazyflasher/tree/kernel-flasher)'s kernel-flasher branch, otherwise its [AnyKernel3](https://github.com/osm0sis/AnyKernel3)

<!--
About the structure:
.
├── boot-patcher/         <-- aka: kernel installer   `./build.py` // `./build.py --installer`
├── common/               <-- Core data for `./build.py`
├── nethunter/            <-- aka: end-goal           `./build.py` // `./build.py --no-installer`
├── uninstaller/          <-- aka: Removal            `./build.py --uninstaller`
├── bootstrap.sh          <-- REF: https://gitlab.com/kalilinux/nethunter/build-scripts/kali-nethunter-kernels
├── build.py              <-- Create a one off image
└── generate-release.py   <-- Create a shell script (`./release-<release>.sh`) to generate multiple images, each time calling `./build.py [...]` (Meant for Kali NetHunter dev team)
-->

## Instructions

### Preparing the environment

Before building **anything**, you will need to initialize the [kernels repository](https://gitlab.com/kalilinux/nethunter/build-scripts/kali-nethunter-kernels).

The whole setup has been automated. As Kali NetHunter kernels have an immense binary Git history, we suggest using shallow clone _(`--depth 1`)_, rather than **full history** when prompt:

```console
$ ./bootstrap.sh
```

_This will clone [Kali NetHunter Kernels](https://gitlab.com/kalilinux/nethunter/build-scripts/kali-nethunter-kenrels) into `./kernels/`_

### Build command examples

Example building for the **Nexus 5 (hammerhead)**:

```console
$ ./build.py -d hammerhead --marshmallow
```

- - -

Building the **kernel only** _(useful for testing if kernel works)_:

```console
$ ./build.py -d hammerhead --marshmallow -k
```

- - -

Building **without the kernel** _(useful for just updating apps)_:

```console
$ ./build.py -d hammerhead --marshmallow -nk
```

- - -

Building with **adding a full chroot** _(use either [pre-created](https://kali.download/nethunter-images/current/rootfs/) (default) or [generate own](https://gitlab.com/kalilinux/nethunter/build-scripts/kali-nethunter-rootfs) then add to `./rootfs/kalifs-full-[arch].tar.xz`):_

```console
$ ./build.py -d hammerhead --marshmallow --rootfs full
```

- - -

Create a **release version**:

```console
$ ./build.py -d hammerhead --marshmallow --rootfs full --release 2024.3
```

- - -

Force **download all third party apps**:

```console
$ ./build.py --force-down
```

- - -

Building the **uninstaller**:

```console
$ ./build.py --uninstaller
```

- - -

Show **help**:

```console
$ ./build.py -h
```

<!---
### Kali NetHunter Release

Usage & Example

```console
$ ./prep-release.py --inputfile <input file> --outputdir <output directory> --release <release>
$
$ ./prep-release.py --inputfile kernels/devices.yml --outputdir /opt/NetHunter/2024.3/images/ --release 2024.3
```
--->

### How to add a new/unsupported device

See the `README.md` located in the Kali NetHunter Kernels repository: <https://gitlab.com/kalilinux/nethunter/build-scripts/kali-nethunter-kernels>
A starting point would be to review:
- `./kernels/devices.yml` ([here](https://gitlab.com/kalilinux/nethunter/build-scripts/kali-nethunter-kernels/-/blob/main/devices.yml))
- [Automated porting (Kernel builder)](https://www.kali.org/docs/nethunter/porting-nethunter-kernel-builder/)
- [Manual porting](https://www.kali.org/docs/nethunter/porting-nethunter/)
